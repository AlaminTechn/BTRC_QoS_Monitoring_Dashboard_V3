================================================================================
BTRC Dashboard - FREE Cloud Deployment Guide
Complete Guide to Deploy ALL Services at ZERO Cost (with Security)
================================================================================

ðŸ“‹ TABLE OF CONTENTS
================================================================================
1. Overview - What We're Deploying
2. Free Cloud Database Options (Secured)
3. Free Application Hosting Options
4. Complete Architecture Comparison
5. RECOMMENDED: Best Free Stack for BTRC
6. Step-by-Step Deployment Guide
7. Security Configuration
8. Connecting Services
9. Domain & SSL Setup
10. Monitoring & Backups
11. Cost Analysis & Limits
12. Scaling Beyond Free Tier
13. Troubleshooting
14. Alternative Options

================================================================================
1. OVERVIEW - WHAT WE'RE DEPLOYING
================================================================================

Current BTRC Stack (Local):
---------------------------
1. TimescaleDB (PostgreSQL) - Port 5433
   - QoS data (172,800 measurements)
   - Metabase metadata

2. Metabase - Port 3000
   - Dashboards and visualizations
   - User authentication

3. Nginx - Port 8080
   - Custom dashboard wrapper

4. React App (if going that route) - Port 3001
   - Custom frontend

CLOUD DEPLOYMENT GOAL:
---------------------
âœ… Database: Secure cloud PostgreSQL (with TimescaleDB)
âœ… Metabase: Cloud-hosted application
âœ… Frontend: Static site hosting
âœ… SSL/HTTPS: Free certificates
âœ… Custom Domain: (optional but recommended)
âœ… Cost: $0/month (within free tier limits)

================================================================================
2. FREE CLOUD DATABASE OPTIONS (SECURED)
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPTION 1: SUPABASE (RECOMMENDED) â­                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ What: PostgreSQL database with built-in security                        â”‚
â”‚ Free Tier: 500 MB database, 2 GB transfer/month, unlimited API requests â”‚
â”‚ TimescaleDB: âŒ Not supported (use regular PostgreSQL)                  â”‚
â”‚ Security: âœ… SSL, row-level security, built-in auth                     â”‚
â”‚ Dashboard: âœ… Web interface included                                    â”‚
â”‚ Backups: âœ… Automatic backups                                           â”‚
â”‚ Location: Multiple regions (choose closest)                             â”‚
â”‚                                                                          â”‚
â”‚ Pros:                                                                    â”‚
â”‚ - Easy setup (5 minutes)                                                â”‚
â”‚ - Built-in auth system                                                  â”‚
â”‚ - REST API auto-generated                                               â”‚
â”‚ - Great dashboard                                                       â”‚
â”‚ - No credit card required                                               â”‚
â”‚                                                                          â”‚
â”‚ Cons:                                                                    â”‚
â”‚ - 500 MB limit (may be tight for large datasets)                       â”‚
â”‚ - No TimescaleDB (but can use regular PostgreSQL with partitioning)    â”‚
â”‚                                                                          â”‚
â”‚ Best for: Small to medium datasets, rapid deployment                    â”‚
â”‚ URL: https://supabase.com                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPTION 2: NEON                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ What: Serverless PostgreSQL (scales to zero)                            â”‚
â”‚ Free Tier: 3 GB storage, 10 projects, 100 hours compute/month          â”‚
â”‚ TimescaleDB: âŒ Not supported                                           â”‚
â”‚ Security: âœ… SSL, branching, point-in-time recovery                     â”‚
â”‚ Dashboard: âœ… Modern web UI                                             â”‚
â”‚ Backups: âœ… Automatic                                                   â”‚
â”‚                                                                          â”‚
â”‚ Pros:                                                                    â”‚
â”‚ - Scales to zero (pay only when active)                                â”‚
â”‚ - Database branching (like git)                                        â”‚
â”‚ - Generous free tier (3 GB)                                            â”‚
â”‚ - Fast cold starts                                                     â”‚
â”‚                                                                          â”‚
â”‚ Cons:                                                                    â”‚
â”‚ - 100 hours/month compute limit                                        â”‚
â”‚ - Newer service (less mature)                                          â”‚
â”‚                                                                          â”‚
â”‚ Best for: Development, staging, low-traffic production                  â”‚
â”‚ URL: https://neon.tech                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPTION 3: RAILWAY (Limited Free)                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ What: Full deployment platform with PostgreSQL                          â”‚
â”‚ Free Tier: $5 credit/month (usually enough for DB + small app)         â”‚
â”‚ TimescaleDB: âœ… Can install extension                                   â”‚
â”‚ Security: âœ… SSL, private networking                                    â”‚
â”‚ Dashboard: âœ… Excellent UI                                              â”‚
â”‚ Backups: âš ï¸ Manual only on free tier                                   â”‚
â”‚                                                                          â”‚
â”‚ Pros:                                                                    â”‚
â”‚ - TimescaleDB support!                                                 â”‚
â”‚ - Can deploy full app + DB                                             â”‚
â”‚ - Great developer experience                                           â”‚
â”‚ - Private networking                                                   â”‚
â”‚                                                                          â”‚
â”‚ Cons:                                                                    â”‚
â”‚ - $5/month limit (may run out)                                         â”‚
â”‚ - Credit card required (even for free tier)                            â”‚
â”‚ - Sleep after inactivity                                               â”‚
â”‚                                                                          â”‚
â”‚ Best for: Full-stack deployment with TimescaleDB                        â”‚
â”‚ URL: https://railway.app                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPTION 4: ELEPHANTSQL (Classic Free Tier)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ What: PostgreSQL as a service (oldest provider)                         â”‚
â”‚ Free Tier: 20 MB storage, 5 concurrent connections                     â”‚
â”‚ TimescaleDB: âŒ Not supported                                           â”‚
â”‚ Security: âœ… SSL                                                         â”‚
â”‚ Dashboard: âœ… Basic web console                                         â”‚
â”‚ Backups: âŒ Not on free tier                                            â”‚
â”‚                                                                          â”‚
â”‚ Pros:                                                                    â”‚
â”‚ - Truly free forever                                                   â”‚
â”‚ - No credit card needed                                                â”‚
â”‚ - Reliable and mature                                                  â”‚
â”‚                                                                          â”‚
â”‚ Cons:                                                                    â”‚
â”‚ - Only 20 MB! (too small for BTRC)                                     â”‚
â”‚ - 5 connections limit                                                  â”‚
â”‚                                                                          â”‚
â”‚ Best for: Tiny projects, testing only                                   â”‚
â”‚ URL: https://www.elephantsql.com                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPTION 5: TIMESCALE CLOUD (Trial, then paid)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ What: Official TimescaleDB cloud hosting                                â”‚
â”‚ Free Tier: 30-day trial, then $25/month minimum                        â”‚
â”‚ TimescaleDB: âœ… Native support (best option)                            â”‚
â”‚ Security: âœ… SSL, VPC, encryption at rest                               â”‚
â”‚ Dashboard: âœ… Professional dashboard                                    â”‚
â”‚ Backups: âœ… Automatic, continuous                                       â”‚
â”‚                                                                          â”‚
â”‚ Pros:                                                                    â”‚
â”‚ - Official TimescaleDB (best performance)                              â”‚
â”‚ - Enterprise features                                                  â”‚
â”‚ - Excellent support                                                    â”‚
â”‚ - Production-ready                                                     â”‚
â”‚                                                                          â”‚
â”‚ Cons:                                                                    â”‚
â”‚ - NOT FREE after 30 days                                               â”‚
â”‚ - $25/month minimum                                                    â”‚
â”‚                                                                          â”‚
â”‚ Best for: Production with budget                                        â”‚
â”‚ URL: https://www.timescale.com/cloud                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RECOMMENDATION FOR BTRC:
-----------------------
ðŸ† OPTION 1: SUPABASE (Best free option)
   OR
ðŸ† OPTION 3: RAILWAY (If you need TimescaleDB)

Supabase is recommended because:
âœ… Generous free tier (500 MB)
âœ… No credit card required
âœ… Built-in security
âœ… Easy to use
âœ… Automatic backups

Railway alternative if:
âœ… You absolutely need TimescaleDB features
âœ… Don't mind providing credit card
âœ… Want all services in one place

================================================================================
3. FREE APPLICATION HOSTING OPTIONS
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ METABASE HOSTING OPTIONS                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Option A: RENDER.COM (Recommended) â­                                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚
â”‚ What: Docker container hosting                                          â”‚
â”‚ Free Tier: 750 hours/month, sleeps after 15 min inactivity             â”‚
â”‚ Memory: 512 MB RAM                                                      â”‚
â”‚ SSL: âœ… Free automatic HTTPS                                            â”‚
â”‚ Custom Domain: âœ… Supported                                             â”‚
â”‚                                                                          â”‚
â”‚ Pros:                                                                    â”‚
â”‚ - Easy deployment (connect GitHub)                                     â”‚
â”‚ - Automatic HTTPS                                                      â”‚
â”‚ - Good for Docker (Metabase is Docker image)                          â”‚
â”‚ - No credit card needed                                                â”‚
â”‚                                                                          â”‚
â”‚ Cons:                                                                    â”‚
â”‚ - Sleeps after 15 min (30-60s cold start)                             â”‚
â”‚ - 512 MB RAM (may be tight for Metabase)                              â”‚
â”‚                                                                          â”‚
â”‚ URL: https://render.com                                                 â”‚
â”‚                                                                          â”‚
â”‚ Option B: FLY.IO                                                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚ Free Tier: 3 small VMs, 3GB persistent storage                         â”‚
â”‚ Memory: Up to 256 MB per VM                                            â”‚
â”‚ SSL: âœ… Free                                                            â”‚
â”‚                                                                          â”‚
â”‚ Pros:                                                                    â”‚
â”‚ - Multiple regions                                                     â”‚
â”‚ - Better control                                                       â”‚
â”‚ - Persistent storage included                                          â”‚
â”‚                                                                          â”‚
â”‚ Cons:                                                                    â”‚
â”‚ - More complex setup                                                   â”‚
â”‚ - Credit card required                                                 â”‚
â”‚                                                                          â”‚
â”‚ URL: https://fly.io                                                     â”‚
â”‚                                                                          â”‚
â”‚ Option C: RAILWAY                                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚ (Same as database option - deploy everything together)                  â”‚
â”‚ $5/month credit covers DB + small Metabase instance                    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REACT FRONTEND HOSTING OPTIONS                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ Option A: VERCEL (Best for React) â­                                    â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚ What: Static site & serverless functions hosting                        â”‚
â”‚ Free Tier: Unlimited bandwidth, 100 GB/month                           â”‚
â”‚ SSL: âœ… Free automatic                                                  â”‚
â”‚ Custom Domain: âœ… Free                                                  â”‚
â”‚ Build Minutes: 6000/month                                              â”‚
â”‚                                                                          â”‚
â”‚ Perfect for: React, Next.js, static sites                              â”‚
â”‚ URL: https://vercel.com                                                 â”‚
â”‚                                                                          â”‚
â”‚ Option B: NETLIFY                                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚ Similar to Vercel, 100 GB bandwidth/month                              â”‚
â”‚ URL: https://netlify.com                                                â”‚
â”‚                                                                          â”‚
â”‚ Option C: CLOUDFLARE PAGES                                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚ Unlimited bandwidth, unlimited sites                                    â”‚
â”‚ Fastest globally (Cloudflare network)                                  â”‚
â”‚ URL: https://pages.cloudflare.com                                       â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
4. COMPLETE ARCHITECTURE COMPARISON
================================================================================

OPTION A: All-in-One (Railway)
------------------------------
Railway: PostgreSQL + Metabase + React (one platform)

Pros: Simple, everything together, private networking
Cons: $5/month may not be enough, credit card required

Cost: $0-5/month (may exceed free $5 credit)


OPTION B: Hybrid (Supabase + Render + Vercel) â­ RECOMMENDED
------------------------------------------------------------
- Supabase: PostgreSQL database (free)
- Render: Metabase hosting (free with sleep)
- Vercel: React frontend (free, always on)

Pros: Best free tiers, no credit card for Supabase/Vercel
Cons: Multiple platforms to manage

Cost: $0/month (within limits)


OPTION C: Minimal (Supabase + Vercel only)
------------------------------------------
- Supabase: Database + Auth API
- Vercel: React app directly querying Supabase

Skip Metabase entirely, use React + ECharts only

Pros: Simplest, fully free, fastest
Cons: Need to build charts in React

Cost: $0/month


OPTION D: Premium Free Tier (Google Cloud / AWS)
------------------------------------------------
Use Google Cloud Run or AWS Free Tier

Pros: More resources, enterprise features
Cons: Complex setup, credit card required, auto-charges after limits

Cost: $0/month (if careful) but risk of charges

================================================================================
5. RECOMMENDED: BEST FREE STACK FOR BTRC
================================================================================

ðŸ† RECOMMENDED ARCHITECTURE ðŸ†
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  USER (browser)                                                         â”‚
â”‚      â†“                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  CLOUDFLARE (CDN & SSL) - FREE                                    â”‚  â”‚
â”‚  â”‚  - HTTPS certificates                                             â”‚  â”‚
â”‚  â”‚  - DDoS protection                                                â”‚  â”‚
â”‚  â”‚  - Global CDN                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚      â†“                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  VERCEL - FREE                                                    â”‚  â”‚
â”‚  â”‚  - React Dashboard Frontend                                       â”‚  â”‚
â”‚  â”‚  - Custom domain: dashboard.btrc.gov.bd                          â”‚  â”‚
â”‚  â”‚  - Always on, no sleep                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚      â†“ (API calls)                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  RENDER.COM - FREE                                                â”‚  â”‚
â”‚  â”‚  - Metabase Application                                           â”‚  â”‚
â”‚  â”‚  - Sleeps after 15 min (30s wake up)                             â”‚  â”‚
â”‚  â”‚  - Custom domain: metabase.btrc.gov.bd                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚      â†“ (database queries)                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SUPABASE - FREE                                                  â”‚  â”‚
â”‚  â”‚  - PostgreSQL Database (500 MB)                                   â”‚  â”‚
â”‚  â”‚  - SSL encryption                                                 â”‚  â”‚
â”‚  â”‚  - Automatic backups                                              â”‚  â”‚
â”‚  â”‚  - Row-level security                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TOTAL COST: $0/month âœ…

WITHIN FREE LIMITS:
- Supabase: 500 MB database, 2 GB bandwidth
- Render: 750 hours/month (always covered)
- Vercel: 100 GB bandwidth/month
- Cloudflare: Unlimited (always free)

================================================================================
6. STEP-BY-STEP DEPLOYMENT GUIDE
================================================================================

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 1: DATABASE SETUP (Supabase) - 10 minutes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 1.1: Create Supabase Account
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Go to https://supabase.com
2. Click "Start your project"
3. Sign up with GitHub (recommended) or email
4. No credit card required âœ…

Step 1.2: Create New Project
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Click "New Project"
2. Fill in details:
   - Name: btrc-qos-dashboard
   - Database Password: [Generate strong password]
   - Region: Choose closest to Bangladesh (Singapore recommended)
3. Click "Create new project"
4. Wait 2-3 minutes for provisioning

Step 1.3: Get Connection Details
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Go to Project Settings â†’ Database
2. Note down:
   âœ“ Host: db.xxxxxxxxxx.supabase.co
   âœ“ Database name: postgres
   âœ“ Port: 5432
   âœ“ User: postgres
   âœ“ Password: [your password]
   âœ“ URI: postgres://postgres:[password]@db.xxx.supabase.co:5432/postgres

Step 1.4: Connect and Create Schema
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Method A: Using Supabase SQL Editor (Easiest)
1. Click "SQL Editor" in sidebar
2. Click "New query"
3. Paste your schema from: poc_data_v2.8/02_DB_Schema_Creation_v2.8.sql
4. Run query
5. Create tables, indexes, etc.

Method B: Using psql locally
1. On your local machine:
   psql "postgres://postgres:[password]@db.xxx.supabase.co:5432/postgres"

2. Import schema:
   \i poc_data_v2.8/02_DB_Schema_Creation_v2.8.sql

Step 1.5: Import Data
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Export from local TimescaleDB:
   pg_dump -h localhost -p 5433 -U btrc_admin -d btrc_qos_poc \
     --data-only --table=ts_qos_measurements > data.sql

2. Import to Supabase:
   psql "postgres://postgres:[password]@db.xxx.supabase.co:5432/postgres" \
     < data.sql

3. Verify:
   SELECT COUNT(*) FROM ts_qos_measurements;
   -- Should return 172800

Step 1.6: Enable SSL (Already enabled)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Supabase enforces SSL by default
âœ… All connections encrypted

Step 1.7: Setup Backups
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Automatic daily backups enabled by default
âœ… Point-in-time recovery (7 days on free tier)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 2: METABASE DEPLOYMENT (Render.com) - 15 minutes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 2.1: Prepare Metabase for Cloud
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Create Dockerfile (if not exists):

# Dockerfile
FROM metabase/metabase:latest
ENV MB_DB_TYPE=postgres
ENV MB_DB_CONNECTION_URI=$DATABASE_URL
EXPOSE 3000

2. Create render.yaml:

services:
  - type: web
    name: btrc-metabase
    env: docker
    plan: free
    envVars:
      - key: MB_DB_TYPE
        value: postgres
      - key: MB_DB_DBNAME
        value: postgres
      - key: MB_DB_PORT
        value: 5432
      - key: MB_DB_USER
        value: postgres
      - key: MB_DB_PASS
        sync: false  # Set in Render dashboard
      - key: MB_DB_HOST
        sync: false
      - key: JAVA_TIMEZONE
        value: Asia/Dhaka

Step 2.2: Create Render Account
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Go to https://render.com
2. Sign up with GitHub (recommended)
3. No credit card required âœ…

Step 2.3: Create Web Service
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Click "New +" â†’ "Web Service"
2. Connect GitHub repository (or use Docker image)
3. Configure:
   - Name: btrc-metabase
   - Region: Singapore (closest to Bangladesh)
   - Branch: main
   - Environment: Docker
   - Plan: Free
4. Add environment variables:
   - MB_DB_HOST: db.xxx.supabase.co
   - MB_DB_PASS: [your Supabase password]
   - MB_DB_USER: postgres
   - MB_DB_DBNAME: postgres
   - MB_DB_PORT: 5432
   - MB_DB_TYPE: postgres
5. Click "Create Web Service"

Step 2.4: Wait for Deployment
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Render builds and deploys (5-10 minutes)
2. Watch logs in real-time
3. Once deployed, get URL: https://btrc-metabase.onrender.com

Step 2.5: Setup Metabase
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Visit https://btrc-metabase.onrender.com
2. First-time setup:
   - Language: English
   - Name: BTRC Admin
   - Email: alamin.technometrics22@gmail.com
   - Password: [Choose strong password]
3. Skip "Add your data" (already using Supabase as metadata DB)
4. Add BTRC database:
   - Database type: PostgreSQL
   - Name: BTRC QoS
   - Host: db.xxx.supabase.co
   - Port: 5432
   - Database name: postgres
   - Username: postgres
   - Password: [Supabase password]
   - SSL: Yes (required)
5. Test connection
6. Save

Step 2.6: Import Dashboards
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Option A: Manual recreation
- Recreate dashboards using Metabase UI

Option B: API import (if you exported)
- Use Metabase API to import dashboard definitions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 3: FRONTEND DEPLOYMENT (Vercel) - 10 minutes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 3.1: Prepare React App
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
If using React + ECharts approach:

1. Update API endpoints in code:
   const METABASE_URL = process.env.REACT_APP_METABASE_URL ||
     'https://btrc-metabase.onrender.com';

2. Create .env.production:
   REACT_APP_METABASE_URL=https://btrc-metabase.onrender.com

3. Build app:
   npm run build

If using HTML wrapper:
1. Update iframe URLs to point to Render Metabase
2. No build needed

Step 3.2: Create Vercel Account
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Go to https://vercel.com
2. Sign up with GitHub
3. No credit card required âœ…

Step 3.3: Deploy to Vercel
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Click "Add New" â†’ "Project"
2. Import Git Repository
3. Select your repository
4. Configure:
   - Framework Preset: Create React App (auto-detected)
   - Build Command: npm run build
   - Output Directory: build
   - Environment Variables:
     - REACT_APP_METABASE_URL = https://btrc-metabase.onrender.com
5. Click "Deploy"
6. Wait 2-3 minutes
7. Get URL: https://btrc-dashboard.vercel.app

Step 3.4: Add Custom Domain (Optional)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. In Vercel project settings â†’ Domains
2. Add: dashboard.btrc.gov.bd
3. Update DNS records at your domain registrar:
   Type: CNAME
   Name: dashboard
   Value: cname.vercel-dns.com
   TTL: 3600
4. Wait for DNS propagation (5-60 minutes)
5. Vercel auto-provisions SSL certificate

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 4: DOMAIN & SSL SETUP (Cloudflare) - 15 minutes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 4.1: Setup Cloudflare (Optional but Recommended)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Sign up at https://cloudflare.com (free plan)
2. Add your domain: btrc.gov.bd
3. Update nameservers at your registrar to Cloudflare's

Step 4.2: Configure DNS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Add DNS records:

1. Frontend:
   Type: CNAME
   Name: dashboard
   Target: cname.vercel-dns.com
   Proxy: ON (orange cloud)

2. Metabase:
   Type: CNAME
   Name: metabase
   Target: btrc-metabase.onrender.com
   Proxy: ON

Step 4.3: SSL/TLS Settings
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. SSL/TLS â†’ Overview â†’ Full (strict)
2. Edge Certificates â†’ Always Use HTTPS: ON
3. Automatic HTTPS Rewrites: ON

âœ… Free SSL certificates auto-provisioned!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PHASE 5: SECURITY CONFIGURATION - 20 minutes
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Step 5.1: Supabase Security
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Enable Row Level Security (RLS):

ALTER TABLE ts_qos_measurements ENABLE ROW LEVEL SECURITY;

-- Policy: Only authenticated users can read
CREATE POLICY "Enable read for authenticated users"
ON ts_qos_measurements FOR SELECT
TO authenticated
USING (true);

2. Create API keys with limited permissions
3. Enable MFA for admin account

Step 5.2: Metabase Security
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Admin Settings â†’ Security
   - Require HTTPS: YES
   - Session timeout: 24 hours
   - Enable audit logging

2. Set strong admin password
3. Enable 2FA (if using Google OAuth)

3. Restrict access by IP (if needed):
   - Use Cloudflare firewall rules
   - Allow only office IP ranges

Step 5.3: Environment Variables
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Never commit secrets to Git!

In Render:
- Use environment variables (not hardcoded)
- Mark sensitive vars as "secret"

In Vercel:
- Add secrets via dashboard
- Never in code

Step 5.4: Database Firewall
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
In Supabase:
1. Settings â†’ Database â†’ Network
2. Add allowed IP addresses:
   - Your office IP
   - Render IP ranges (if needed)

Or use SSL certificates for authentication

Step 5.5: Backup Strategy
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Supabase: Automatic backups (daily)
2. Manual backups weekly:
   pg_dump "postgres://postgres:...@db.xxx.supabase.co:5432/postgres" \
     > backup_$(date +%Y%m%d).sql

3. Store backups on:
   - Google Drive (15 GB free)
   - GitHub private repo (< 100 MB)
   - Dropbox (2 GB free)

================================================================================
7. CONNECTING SERVICES
================================================================================

Service URLs (After Deployment):
--------------------------------
Database: db.xxx.supabase.co:5432
Metabase: https://btrc-metabase.onrender.com
Frontend: https://dashboard.btrc.gov.bd

Connection Flow:
---------------
Frontend (Vercel)
    â†’ API calls â†’
Metabase (Render)
    â†’ Database queries â†’
PostgreSQL (Supabase)

CORS Configuration:
------------------
In Metabase, allow frontend domain:
MB_EMBEDDING_APP_ORIGIN=https://dashboard.btrc.gov.bd

Environment Variables Setup:
---------------------------
Vercel (Frontend):
  REACT_APP_METABASE_URL=https://btrc-metabase.onrender.com

Render (Metabase):
  MB_DB_HOST=db.xxx.supabase.co
  MB_DB_PORT=5432
  MB_DB_USER=postgres
  MB_DB_PASS=[secret]
  MB_DB_DBNAME=postgres
  MB_SITE_URL=https://btrc-metabase.onrender.com

================================================================================
8. MONITORING & BACKUPS
================================================================================

MONITORING:
----------
1. Supabase Dashboard:
   - Query performance
   - Database size
   - Connection count
   - Bandwidth usage

2. Render Dashboard:
   - App logs
   - Performance metrics
   - Uptime status
   - Deploy history

3. Vercel Dashboard:
   - Analytics
   - Bandwidth usage
   - Build logs
   - Performance insights

4. Cloudflare Dashboard:
   - Traffic analytics
   - Security events
   - Cache statistics

ALERTS:
------
Setup alerts for:
- Database size > 400 MB (80% of 500 MB)
- Render app sleep/wake
- SSL certificate expiry
- Bandwidth approaching limit

BACKUPS:
-------
Automated:
  âœ… Supabase: Daily automatic backups (7-day retention)
  âœ… Render: Automatic deploy logs
  âœ… Vercel: Automatic deployment history

Manual:
  ðŸ“… Weekly: Full database export
  ðŸ“… Monthly: Configuration backup
  ðŸ“… Before major changes: Snapshot

Backup Script:
-------------
#!/bin/bash
# backup.sh - Run weekly

DATE=$(date +%Y%m%d)
pg_dump "postgres://postgres:[pass]@db.xxx.supabase.co:5432/postgres" \
  --format=custom \
  > backups/btrc_backup_$DATE.dump

# Upload to Google Drive (using rclone)
rclone copy backups/btrc_backup_$DATE.dump gdrive:BTRC-Backups/

================================================================================
9. COST ANALYSIS & LIMITS
================================================================================

FREE TIER LIMITS:
----------------

Supabase (Database):
  âœ… 500 MB storage
  âœ… 2 GB bandwidth/month
  âœ… Unlimited API requests
  âœ… 50,000 monthly active users
  âš ï¸ No automatic backups beyond 7 days
  âš ï¸ Community support only

Render (Metabase):
  âœ… 750 hours/month (always enough)
  âœ… 512 MB RAM
  âœ… Sleeps after 15 min inactivity
  âš ï¸ 30-60 second cold start
  âš ï¸ No persistent disk

Vercel (Frontend):
  âœ… 100 GB bandwidth/month
  âœ… Unlimited sites
  âœ… Automatic HTTPS
  âœ… Global CDN
  âš ï¸ 6000 build minutes/month

Cloudflare (CDN/SSL):
  âœ… Unlimited bandwidth
  âœ… Free SSL
  âœ… DDoS protection
  âœ… Always free (no limits!)

TOTAL MONTHLY COST: $0 âœ…

WHAT HAPPENS IF YOU EXCEED LIMITS?
----------------------------------

Supabase:
  > 500 MB database:
    â†’ Upgrade to Pro ($25/month)
    â†’ Or clean old data

  > 2 GB bandwidth:
    â†’ App stops working
    â†’ Upgrade to Pro

Render:
  App works within 750 hours/month (always OK)
  Sleep after inactivity (not a limit, just behavior)

Vercel:
  > 100 GB bandwidth:
    â†’ $20 per 100 GB overage
    â†’ Upgrade to Pro ($20/month)

ESTIMATED USAGE (BTRC Project):
-------------------------------
Database: ~300 MB (within 500 MB limit) âœ…
Bandwidth: ~10 GB/month (within limits) âœ…
Build minutes: ~100/month (within limit) âœ…

VERDICT: Will stay free indefinitely âœ…

================================================================================
10. SCALING BEYOND FREE TIER
================================================================================

WHEN TO UPGRADE:
---------------

1. Database > 400 MB:
   â†’ Supabase Pro: $25/month (8 GB)
   â†’ Or: Neon Scale: $19/month (unlimited storage)

2. Metabase needs to be always on:
   â†’ Render Standard: $7/month (no sleep)
   â†’ Or: Railway: $5-10/month

3. Heavy traffic (> 50,000 visits/month):
   â†’ All services can handle this on free tier!
   â†’ Only pay if bandwidth exceeds limits

4. Need TimescaleDB features:
   â†’ Railway: Free $5 credit (may need more)
   â†’ Or: Timescale Cloud: $25/month

UPGRADE PATH:
------------

Phase 1: Free (Current)
  Cost: $0/month
  Users: < 100
  Data: < 500 MB

Phase 2: Light Production ($10-20/month)
  - Supabase Pro: $25/month OR
  - Railway: $10/month (DB + Metabase together)
  Users: < 1000
  Data: < 5 GB

Phase 3: Full Production ($50-100/month)
  - Timescale Cloud: $25/month
  - Render Standard: $7/month
  - Vercel Pro: $20/month (if needed)
  - Cloudflare: Still free!
  Users: < 10,000
  Data: < 50 GB

Phase 4: Enterprise ($200+/month)
  - Dedicated servers
  - Enterprise support
  - SLA guarantees

================================================================================
11. TROUBLESHOOTING
================================================================================

Problem: "Render app is sleeping"
Solution: This is normal. First request takes 30-60s to wake up.
  Workaround: Use a ping service (cron-job.org) to keep it awake

Problem: "Database connection failed"
Solution: Check if SSL is enabled, verify credentials
  Test: psql "postgres://postgres:...@db.xxx.supabase.co:5432/postgres?sslmode=require"

Problem: "CORS error when calling Metabase API"
Solution: Set MB_EMBEDDING_APP_ORIGIN in Render environment variables

Problem: "Supabase bandwidth exceeded"
Solution: Optimize queries, add caching, or upgrade to Pro

Problem: "Deployment failed on Render"
Solution: Check logs, verify Dockerfile, ensure environment variables set

Problem: "SSL certificate error"
Solution: Wait for Cloudflare/Vercel to provision cert (can take 24 hours)

================================================================================
12. ALTERNATIVE FREE OPTIONS
================================================================================

If Above Stack Doesn't Work:
----------------------------

OPTION: Google Cloud Platform (Free Tier)
  - Cloud Run: 2 million requests/month (free)
  - Cloud SQL: $10/month (not free but cheap)
  - Cloud Storage: 5 GB free
  Setup: More complex, requires credit card

OPTION: AWS Free Tier
  - EC2 t2.micro: 750 hours/month (12 months free)
  - RDS: 750 hours/month (12 months free)
  - S3: 5 GB storage free
  Setup: Complex, auto-charges after 12 months

OPTION: Azure Free Tier
  - App Service: 10 web apps
  - Database: Limited free tier
  - 12 months free, then paid
  Setup: Medium complexity

OPTION: Self-Hosted on Free VPS
  - Oracle Cloud: Free tier includes 2 VMs (forever)
  - Hetzner: $5/month (not free but cheap)
  - DigitalOcean: $4/month (student discount available)

================================================================================
13. FINAL CHECKLIST
================================================================================

Before Going Live:
-----------------
Database:
  â–¡ Supabase project created
  â–¡ Schema imported
  â–¡ Data migrated
  â–¡ SSL enabled
  â–¡ Backups configured
  â–¡ Connection tested

Metabase:
  â–¡ Deployed to Render
  â–¡ Connected to Supabase
  â–¡ Dashboards recreated
  â–¡ Users created
  â–¡ Permissions configured
  â–¡ Public links working

Frontend:
  â–¡ Deployed to Vercel
  â–¡ API endpoints updated
  â–¡ SSL enabled
  â–¡ Custom domain configured
  â–¡ Mobile responsive

Security:
  â–¡ SSL/HTTPS everywhere
  â–¡ Strong passwords set
  â–¡ Environment variables secured
  â–¡ No secrets in code
  â–¡ Firewall configured

Monitoring:
  â–¡ Alerts configured
  â–¡ Backup script automated
  â–¡ Analytics enabled
  â–¡ Logs accessible

Documentation:
  â–¡ Connection strings documented
  â–¡ User guide updated
  â–¡ Admin procedures documented
  â–¡ Troubleshooting guide ready

================================================================================
14. QUICK START COMMANDS
================================================================================

# 1. Export local database
pg_dump -h localhost -p 5433 -U btrc_admin -d btrc_qos_poc \
  --format=custom > local_backup.dump

# 2. Import to Supabase
pg_restore --no-owner --no-privileges \
  -h db.xxx.supabase.co -p 5432 -U postgres -d postgres \
  local_backup.dump

# 3. Test connection
psql "postgres://postgres:[password]@db.xxx.supabase.co:5432/postgres?sslmode=require"

# 4. Build React app
cd react-app
npm run build

# 5. Deploy to Vercel
vercel --prod

# 6. Check everything
curl https://dashboard.btrc.gov.bd
curl https://btrc-metabase.onrender.com/api/health

================================================================================
SUMMARY
================================================================================

RECOMMENDED FREE STACK:
----------------------
âœ… Database: Supabase (500 MB, free forever)
âœ… Metabase: Render.com (free, sleeps after 15 min)
âœ… Frontend: Vercel (100 GB bandwidth/month)
âœ… CDN/SSL: Cloudflare (unlimited, free forever)

TOTAL COST: $0/month

SETUP TIME:
----------
- Database: 10 minutes
- Metabase: 15 minutes
- Frontend: 10 minutes
- Domain/SSL: 15 minutes
Total: ~50 minutes

LIMITATIONS:
-----------
- Database: 500 MB (enough for BTRC POC)
- Metabase: Sleeps after 15 min (30s wake up)
- Frontend: 100 GB bandwidth (very generous)

WHEN TO UPGRADE:
---------------
- Database > 400 MB â†’ Supabase Pro ($25/month)
- Need always-on Metabase â†’ Render Standard ($7/month)
- Very high traffic â†’ Stay on free tier, it handles it!

SECURITY:
--------
âœ… SSL everywhere
âœ… Encrypted connections
âœ… Automatic backups
âœ… Firewall protection
âœ… DDoS protection (Cloudflare)

READY TO DEPLOY: Follow Phase 1-5 above!

================================================================================
END OF GUIDE
================================================================================

For questions: Refer to section 11 (Troubleshooting)
For monitoring: See section 8
For security: See section 7
For scaling: See section 10

Good luck with your deployment! ðŸš€
